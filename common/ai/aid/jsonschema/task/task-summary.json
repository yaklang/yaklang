{
  "description": "本 Schema 用于 AI 汇报当前子任务的执行状态。它管理任务流程、总结进展，并优化上下文。",
  "type": "object",
  "required": ["@action"],
  "properties": {
    "@action": {
      "type": "string",
      "const": "summary"
    },
    "status_summary": {
      "type": "string",
      "description": "【执行中状态】简要记录当前子任务在执行过程中的状态。用于辅助决策，例如记录尝试次数、中间结果或已发生的错误。此字段在任务活跃时更新，对于复杂任务尤其重要。",
      "examples": ["尝试1/3：API调用超时。", "数据校验中：70%已完成。", "等待用户确认关键步骤。"]
    },
    "task_long_summary": {
      "type": "string",
      "description": "【任务完成-详细版】必须包含：1)事实性内容（具体执行了什么操作、调用了哪些工具/命令）；2)关键数据（数值、统计信息、配置参数等）；3)重要发现（问题、异常、风险点）；4)结论性建议（后续任务建议）。约200-400字，确保信息完整且可追溯。",
      "examples": [
        "系统配置检查已完成。执行了uname -a、hostname、uptime命令。关键数据：CentOS 7.9 x86_64，内核3.10.0-1160，运行时间127天，CPU 8核，内存16GB（已用78%）。发现问题：内存使用率偏高。结论：基础配置正常，建议后续检查高内存进程。",
        "网络连接检查已完成。使用ss -tulnp扫描。关键数据：23个监听端口，开放22(SSH)/80(Nginx)/443(Nginx)，活跃连接156个。安全发现：5个境外SSH尝试已被fail2ban拦截。结论：网络配置安全，建议关注fail2ban日志。",
        "Web服务扫描完成。目标：Nginx 1.18.0和Tomcat 8.5.65。发现：server_tokens未关闭（低危），Tomcat管理界面对外暴露（中危）。共2个中危、3个低危问题。修复建议：关闭server_tokens，限制Tomcat管理界面访问。"
      ]
    },
    "task_short_summary": {
      "type": "string",
      "description": "【任务完成-精简版】用最精炼的语言总结任务的最终成果或跳过原因，保留核心信息。此总结会用于后续所有进度展示, 也可包含对后续任务的关键建议。约50-100字。",
      "examples": ["情感分析完成，65%正面。下一步：生成报告。", "因API配额限制跳过图像生成，继续文本内容。", "用户认证成功。提示：用户权限为只读。"]
    }
  },
  "additionalProperties": false
}
