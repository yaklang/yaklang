{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": ["@action", "tasks", "main_task", "main_task_goal"],
  "properties": {
    "@action": {
      "const": "plan",
      "description": "标识当前操作为**任务规划 (plan)**。此操作的核心是将用户提出的一个相对宏观或初步的需求，系统性地转化为一个结构清晰、目标明确、可执行的主任务，并进一步将其分解为一系列具体的、可操作的子任务。"
    },
    "main_task": {
      "type": "string",
      "description": "根据用户原始输入提炼并**优化表达的核心任务名称**。此名称应作为整个规划的总纲领，简洁、明确地概括用户的主要意图。**强烈推荐采用‘动词+名词’的格式**，以清晰指示核心行动和对象（例如：‘构建电商平台用户认证系统’而非‘用户系统’）。"
    },
    "main_task_goal": {
      "type": "string",
      "description": "为 `main_task` 设定的**总体目标和最终成功标准**。**必须清晰、无歧义地阐述以下三点**：1）**明确的完成边界**：整个主任务在何种状态或达到何种程度可被视为完全成功结束？2）**关键的成功衡量指标**：通过哪些具体的、可量化的指标来评判主任务的完成质量和效果？3）**预期的核心交付成果或最终状态**：主任务完成后，期望产出哪些核心的、有形的交付物或达成的关键业务状态？此目标应避免模糊不清的表述，确保提供一个可验证的、宏观的完成基准。"
    },
    "tasks": {
      "type": "array",
      "description": "将 `main_task` **进一步细化分解后产生的一系列具体的、可独立执行的子任务列表**。每个子任务都是实现 `main_task_goal` 的一个必要步骤或组成部分。",
      "items": {
        "type": "object",
        "required": ["subtask_name", "subtask_goal"],
        "properties": {
          "subtask_name": {
            "type": "string",
            "description": "新创建的子任务的简洁、概括性名称。**强烈推荐采用‘动词+名词’的格式**（例如：'设计数据库ER图'、'编写API接口文档'），以便清晰表达子任务的核心动作和对象。**长度建议控制在25个汉字（或等效字符数）以内**，确保其易于理解和在后续流程中引用。",
            "minLength": 1
          },
          "subtask_goal": {
            "type": "string",
            "description": "为当前子任务设定的具体目标和衡量其完成的明确标准。**必须清晰、无歧义地阐述以下三点**：1）**明确的完成条件**：在什么具体情况下可以认定此子任务已完成？（例如：‘代码通过所有单元测试并合并到主分支’）2）**具体的输出要求或交付物**：此子任务完成后，应产出哪些具体的成果或达到哪些明确的输出标准？（例如：‘一份包含A记录和AAAA记录的IP地址列表报告.csv’）3）**可量化的成功指标（若适用）**：如果可能，提供可量化的指标来衡量子任务的完成质量（例如：‘API响应时间低于200ms’）。**坚决避免使用如‘进一步分析’、‘补充相关信息’、‘进行一些研究’等模糊、不可验证的表述。** 目标是确保每个子任务都有一个明确、可验证的终点。" ,
            "minLength": 1
          }
        }
      }
    }
  },
  "example": {
    "@action": "plan",
    "main_task": "优化用户输入的任务描述",
    "main_task_goal": "确保任务描述清晰、具体，便于后续执行和跟踪，最终输出一份经过优化的任务描述文档。",
    "tasks": [
      {
        "subtask_name": "分析用户原始输入",
        "subtask_goal": "完整提取用户输入文本中的所有关键信息点、显性需求和隐性期望，输出一份包含这些内容的分析摘要。"
      },
      {
        "subtask_name": "重构任务核心描述",
        "subtask_goal": "基于分析摘要，使用‘动词+名词’的格式，将用户输入改写为单一、清晰、无歧义的核心任务描述，不超过30字。"
      },
      {
        "subtask_name": "定义任务完成标准",
        "subtask_goal": "为重构后的核心任务描述，制定至少3条明确、可衡量的完成标准，并说明预期的交付成果。"
      }
    ]
  }
}
