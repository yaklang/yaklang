{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": [
    "@action",
    "next_action",
    "human_readable_thought",
    "cumulative_summary",
    "is_final_step"
  ],
  "properties": {
    "@action": {
      "const": "object",
      "description": "set '@action' can help the AI identify the output json object",
      "type": "string"
    },
    "next_action": {
      "description": "Contains the specific action the AI has decided to take. You must choose one action type and provide its corresponding payload.",
      "properties": {
        "answer_payload": {
          "description": "USE THIS FIELD ONLY IF type is 'directly_answer'. Provide the final, complete answer for the user here. The content should be self-contained and ready to be displayed.",
          "type": "string"
        },
        "plan_request_payload": {
          "description": "USE THIS FIELD ONLY IF type is 'request_plan_and_execution'. Provide a one-sentence summary of the complex task that needs a multi-step plan. This summary will trigger a more advanced planning system. Example: 'Create a marketing plan for a new product launch.'",
          "type": "string"
        },
        "tool_request_payload": {
          "description": "USE THIS FIELD ONLY IF type is 'require_tool'. Provide the exact name of the tool you need to use (e.g., 'web_search', 'database_query'). Another system will handle the parameter generation based on this name. Do NOT include tool arguments here.",
          "type": "string"
        },
        "type": {
          "description": "You MUST choose one of these three action types. The value you select here determines which of the other fields in this 'action' object you should populate.",
          "enum": [
            "directly_answer",
            "require_tool",
            "request_plan_and_execution"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "cumulative_summary": {
      "description": "An evolving summary of the conversation. Update this field to include key information from the current interaction that should be remembered for future responses. Include topics discussed, user preferences, important context, and relevant details. If this is the first interaction, create a new summary. If there's existing context, build upon it.",
      "type": "string"
    },
    "human_readable_thought": {
      "description": "Provide a brief, user-friendly status message here, explaining what you are currently doing. This will be shown to the user in real-time. Examples: 'Okay, I understand. Searching for the requested information now...', 'I need to use a tool to get the current stock price.', 'This is a complex request, I will create a plan first.'",
      "type": "string"
    },
    "is_final_step": {
      "description": "Set this to 'true' ONLY when the user's overall request has been fully satisfied and no more actions are needed. Otherwise, set it to 'false' to continue the process.",
      "type": "boolean"
    }
  },
  "additionalProperties": true
}