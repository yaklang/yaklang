package lowhttp

import (
	"strings"
	"testing"
	"yaklang/common/yak/yaklib/codec"
)

func TestFixHTTPResponse4(t *testing.T) {
	//	var req = `GET /info.php?fid=8%27%29%2F%2A%2A%2FUniOn%2F%2A%2A%2FSelect%2F%2A%2A%2FSLeep%284.036285067472142%29%23&id=402 HTTP/1.1
	//Host: www.bjski.com.cn
	//Cookie: PHPSESSID=value
	//User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.116 Safari/537.36
	//
	//`
	//	rsp, err := SendHTTPRequestWithRawPacket(false, "www.bjski.com.cn", 0, []byte(req), 10*time.Second)
	//	if err != nil {
	//		panic(err)
	//	}
	//	header, body := SplitHTTPHeadersAndBodyFromPacket(rsp)
	//	_ = header
	//	var a, _ = codec.CharDetect(body)
	//	_ = a
	//	println(string(codec.EncodeToHex(body)))
	//	decoded, err := codec.GB18030ToUtf8(body)
	//	if err != nil {
	//		panic(err)
	//	}
	//	println(string(decoded))
	rawResp, _ := codec.DecodeBase64(`SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBTdW4sIDI2IEZlYiAyMDIzIDAzOjQ0OjUzIEdNVA0KU2VydmVyOiBBcGFjaGUNClgtUG93ZXJlZC1CeTogUEhQLzUuMi4xNw0KRXhwaXJlczogVGh1LCAxOSBOb3YgMTk4MSAwODo1MjowMCBHTVQNCkNhY2hlLUNvbnRyb2w6IG5vLXN0b3JlLCBuby1jYWNoZSwgbXVzdC1yZXZhbGlkYXRlLCBwb3N0LWNoZWNrPTAsIHByZS1jaGVjaz0wDQpQcmFnbWE6IG5vLWNhY2hlDQpTZXQtQ29va2llOiBQSFBTRVNTSUQ9dmFsdWU7IGh0dHBPbmx5DQpWYXJ5OiBVc2VyLUFnZW50LEFjY2VwdC1FbmNvZGluZw0KVHJhbnNmZXItRW5jb2Rpbmc6IGNodW5rZWQNCkNvbnRlbnQtVHlwZTogdGV4dC9odG1sDQoNCjFmDQrE+rXEzOG9u7T409Cyu7rPt6iyzsr9LNC70Lu6z9f3DQowDQoNCg==`)
	rsp, body, err := FixHTTPResponse(rawResp)
	if err != nil {
		panic(err)
	}
	if !strings.Contains(string(body), "提交带有不合法参数") {
		t.FailNow()
	}
	println(string(rsp))
}

func TestFixHTTPResponse2(t *testing.T) {
	var jsonChineseOrigin = `HTTP/1.1 200 OK
Connection: keep-alive
Content-Encoding: identity
Content-Type: application/json; charset=utf-8
Date: Mon, 21 Nov 2022 07:54:18 GMT
Edocecart: 32581202071201156071176630638112115
Server: BWS
Traceid: 1669017258039822849010147292226863610359
Vary: Accept-Encoding
Content-Length: 1033

{
    "errno": 0,
    "error": "\u6210\u529f",
    "data": {
        "requestParam": [],
        "response": {
            "cnt": {
                "fansCnt": 182881,
                "fansCntText": "18\u4e07\u7c89\u4e1d",
                "videoCount": 11961,
                "videoCntText": "1.2\u4e07\u4e2a\u89c6\u9891",
                "totalPlaycnt": 0,
                "totalPlaycntText": ""
            },
            "author": {
                "vip": 1,
                "author": "\u6293\u9a6c\u77ed\u661f\u95fb",
                "author_icon": "https:\/\/gimg0.baidu.com\/gimg\/src=https%3A%2F%2Fgips0.baidu.com%2Fit%2Fu%3D2476551077%2C1418779011%26fm%3D3012%26app%3D3012%26autime%3D1667425861%26size%3Db200%2C200&refer=http%3A%2F%2Fwww.baidu.com&app=0&size=f68,68&n=0&g=0n&q=60?sec=0&t=d9946543ab888fe6d5d9c1fb9991428c&fmt=auto",
                "mthid": "1680416484715223",
                "authentication_content": "\u5a31\u4e50\u9886\u57df\u521b\u4f5c\u8005"
            },
            "is_subscribe": 0
        }
    }
}`
	_, body, _ := FixHTTPResponse([]byte(jsonChineseOrigin))
	println(codec.JsonUnicodeDecode(string(body)))
	if !strings.Contains(string(body), "抓马短星闻") {
		panic(11)
	}
}

func TestNewHTTPRequest(t *testing.T) {
	var a = ConvertHTTPRequestToFuzzTag([]byte(`GET / HTTP/1.1
Host: www.baidu.com

` + "\xac\xedasdfasdfasdf\x00\u0000)))\u0000\u0000\u0000\u0000\u0000\u0000\x0100"))
	if !strings.Contains(string(a), `{{unquote("\xac\xed`) {
		panic(1)
	}
}

func TestConvertHTTPRequestToFuzzTag_Multipart(t *testing.T) {
	a := ConvertHTTPRequestToFuzzTag([]byte(`POST /post HTTP/1.1
Accept: */*
Accept-Encoding: gzip, deflate
Connection: keep-alive
Host: httpbin.org
User-Agent: HTTPie/3.2.1
Content-Type:multipart/form-data;boundary=----------Ef1KM7GI3Ef1ei4Ij5ae0KM7cH2KM7
Content-Length: 199

------------Ef1KM7GI3Ef1ei4Ij5ae0KM7cH2KM7
Content-Disposition: form-data; name="file"; filename="a.php"
Content-Type: image/png

` + "\xac\xed\x01\x00\xf1\xff" + `
------------Ef1KM7GI3Ef1ei4Ij5ae0KM7cH2KM7--`))
	println(string(a))
	if !strings.Contains(string(a), `{{unquote("\xac\xed\x01\x00\xf1\xff")}}`) {
		panic("Fix UTF8 Invalid failed")
	}
}

func TestFixEncoding(t *testing.T) {
	var raw, _ = codec.DecodeBase64(`SFRUUC8xLjEgMjAwIE9LDQpTZXJ2ZXI6IEFwYWNoZS1Db3lvdGUvMS4xDQp4LWZyYW1lLW9wdGlvbnM6IFNBTUVPUklHSU4NCkNhY2hlLUNvbnRyb2w6IG5vLWNhY2hlDQpDb250ZW50LVR5cGU6IHRleHQveG1sO2NoYXJzZXQ9R0JLDQpUcmFuc2Zlci1FbmNvZGluZzogY2h1bmtlZA0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpEYXRlOiBUdWUsIDA3IE1hciAyMDIzIDAzOjM1OjQ1IEdNVA0KDQoyMDAwDQp7Il9fdHlwZSI6ImV4dFRyYW5zIiwic3Vic2V0IjoiIiwibWVzc2FnZSI6IrLZ1/fWtNDQs8m5piEiLCJhcHBseUNvZGVEZXNjIjoiyee74dXQxrgiLCJzdWNjZWVkIjp0cnVlLCJDYW5kaWRhdGUiOnsiaXRlbWRlc2MiOiLTpsa4ye233SIsIml0ZW10eXBlIjoiQSIsImNvZGVzZXRpZCI6IjM1IiwiaXRlbWxlbmd0aCI6MiwiaXRlbWlkIjoiYTAxY3oiLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MH0sInJldHVybl9kYXRhIjp7Im1heF9maWxlc2l6ZSI6IjEwIiwibXVzdEZsYWciOmZhbHNlLCJhbnN3ZXJTZXQiOiIiLCJ3cml0ZWFibGUiOiIxIiwiY29kZURhdGEiOm51bGwsInBob3RvX3NpemUiOiI1MTIiLCJwaG90byI6IiIsIm11c3RfdXBsb2FkIjoiMSIsImlzQXR0YWNoQ29kZXNldCI6dHJ1ZSwiZmllbGRfbGlzdCI6eyJBQlEiOnsicmVjb3JkIjoibm8iLCJkYXRhbGlzdCI6W1t7ImNvZGVzZXRpZCI6IjAiLCJpdGVtdHlwZSI6Ik0iLCJpdGVtZGVzYyI6ItGnyfq5pNf3vq3A+iIsIml0ZW1sZW5ndGgiOjEwLCJvbmx5X2ZpZWxkIjoiMCIsImxheWVyIjoiMCIsIml0ZW1pZCI6IkFCUUFBIiwiZXhwbGFpbiI6IiIsImRlY2ltYWwiOjAsImxlYWZfb25seSI6IjAiLCJtdXN0IjoiMSIsImRpc3BsYXluYW1lIjoiIn0seyJmaWxlX2xpc3QiOm51bGx9XV19LCJBQVAiOnsicmVjb3JkIjoibm8iLCJkYXRhbGlzdCI6W1t7ImNvZGVzZXRpZCI6IjAiLCJpdGVtdHlwZSI6Ik0iLCJpdGVtZGVzYyI6ItOmxri2r7v6IiwiaXRlbWxlbmd0aCI6MTAsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIwIiwiaXRlbWlkIjoiQUFQQUEiLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiIifSx7ImZpbGVfbGlzdCI6bnVsbH1dXX0sIkExOSI6eyJyZWNvcmQiOiJubyIsImRhdGFsaXN0IjpbW3siY29kZXNldGlkIjoiMCIsIml0ZW10eXBlIjoiTSIsIml0ZW1kZXNjIjoiuaTX96OoxeDRtaOpvq3A+rG416IiLCJpdGVtbGVuZ3RoIjo1MCwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJpdGVtaWQiOiJBMTlBSiIsImV4cGxhaW4iOiLA/cjno7p4IMTqeNTCLXjE6njUwqOseLWlzrt4uNrOu3jWsM7xo6zI5860ss6807mk1/ejrMfrzO7QtM7eoaMiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiZmlsZV9saXN0IjpudWxsfV1dfSwiQTQ5Ijp7InJlY29yZCI6Im5vIiwiZGF0YWxpc3QiOltbeyJjb2Rlc2V0aWQiOiIwIiwiaXRlbXR5cGUiOiJNIiwiaXRlbWRlc2MiOiK9sbPNx+m/9iIsIml0ZW1sZW5ndGgiOjEwLCJvbmx5X2ZpZWxkIjoiMCIsImxheWVyIjoiMCIsIml0ZW1pZCI6IkE0OUFFIiwiZXhwbGFpbiI6IiIsImRlY2ltYWwiOjAsImxlYWZfb25seSI6IjAiLCJtdXN0IjoiMSIsImRpc3BsYXluYW1lIjoivbGzzcfpv/YifSx7ImZpbGVfbGlzdCI6bnVsbH1dXX0sIkE3OSI6eyJyZWNvcmQiOiJubyIsImRhdGFsaXN0IjpbW3siY29kZXNldGlkIjoiMCIsIml0ZW10eXBlIjoiTSIsIml0ZW1kZXNjIjoivNLNpcfpv/ajqNOmsPy6rLi4xLihosXkxbyhosXkxby4uMS4tcijqSIsIml0ZW1sZW5ndGgiOjEwLCJvbmx5X2ZpZWxkIjoiMCIsImxheWVyIjoiMCIsIml0ZW1pZCI6IkE3OUFFIiwiZXhwbGFpbiI6IrzSzaWzydSx0NXD+6GiudjPtaGiuaTX97WlzruhotawzvGhotGnwPoiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiZmlsZV9saXN0IjpudWxsfV1dfSwiQUFNIjp7InJlY29yZCI6Im5vIiwiZGF0YWxpc3QiOltbeyJjb2Rlc2V0aWQiOiIwIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiLLtsq/sc/StdGn0KO78rWlzrsiLCJpdGVtbGVuZ3RoIjoxMDAsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIwIiwiaXRlbWlkIjoiQUFNQUEiLCJleHBsYWluIjoiyOfDu9PQo6zM7tC0zt4iLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiY29kZXNldGlkIjoiMCIsIml0ZW10eXBlIjoiRCIsIml0ZW1kZXNjIjoiy7bKv8bwyrzKsbzkIiwiaXRlbWxlbmd0aCI6MTAsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIwIiwiZm9ybWF0IjoieXl5eS1NTS1kZCIsIml0ZW1pZCI6IkFBTUFCIiwiZXhwbGFpbiI6IiIsImRlY2ltYWwiOjAsImxlYWZfb25seSI6IjAiLCJtdXN0IjoiMSIsImRpc3BsYXluYW1lIjoiIn0seyJjb2Rlc2V0aWQiOiIwIiwiaXRlbXR5cGUiOiJEIiwiaXRlbWRlc2MiOiLLtsq/veHK+MqxvOQiLCJpdGVtbGVuZ3RoIjoxMCwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJmb3JtYXQiOiJ5eXl5LU1NLWRkIiwiaXRlbWlkIjoiQUFNQUMiLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiIifSx7ImNvZGVzZXRpZCI6Ik1UIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiLLtsq/yty9zNP9wODQzSIsIml0ZW1sZW5ndGgiOjEsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIxIiwiaXRlbWlkIjoiQUFNQUQiLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiIifSx7ImNvZGVzZXRpZCI6Ik1TIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiLLtsq/0ae/xiIsIml0ZW1sZW5ndGgiOjEsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIxIiwiaXRlbWlkIjoiQUFNQUUiLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIwIiwiZGlzcGxheW5hbWUiOiIifSx7ImNvZGVzZXRpZCI6IjAiLCJpdGVtdHlwZSI6IkEiLCJpdGVtZGVzYyI6Isu2yr/XqNK1w/uzxiIsIml0ZW1sZW5ndGgiOjEwMCwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJpdGVtaWQiOiJBQU1BRiIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiY29kZXNldGlkIjoiMCIsIml0ZW10eXBlIjoiQSIsIml0ZW1kZXNjIjoiy7bKv7W8yqYiLCJpdGVtbGVuZ3RoIjo1MCwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJpdGVtaWQiOiJBQU1BSCIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiY29kZXNldGlkIjoiMCIsIml0ZW10eXBlIjoiTiIsIml0ZW1kZXNjIjoiy7bKv9Gn1sYiLCJpdGVtbGVuZ3RoIjoxLCJvbmx5X2ZpZWxkIjoiMCIsImxheWVyIjoiMCIsIml0ZW1pZCI6IkFBTUFHIiwiZXhwbGFpbiI6IiIsImRlY2ltYWwiOjEsImxlYWZfb25seSI6IjAiLCJtdXN0IjoiMSIsImRpc3BsYXluYW1lIjoiIn0seyJmaWxlX2xpc3QiOm51bGx9XV19LCJBMDEiOnsicmVjb3JkIjoieWVzIiwiZGF0YWxpc3QiOltbe30seyJjb2Rlc2V0aWQiOiIwIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiLQ1cP7IiwiaXRlbWxlbmd0aCI6NDAsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIwIiwidmFsdWUiOiLA7r2osqgiLCJpdGVtaWQiOiJBMDEwMSIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiY29kZXNldGlkIjoiQVgiLCJpdGVtdHlwZSI6IkEiLCJpdGVtZGVzYyI6ItDUsfAiLCJpdGVtbGVuZ3RoIjoxLCJvbmx5X2ZpZWxkIjoiMCIsImxheWVyIjoiMSIsIml0ZW1pZCI6IkEwMTA3IiwiZGVjaW1hbCI6MCwibXVzdCI6IjEiLCJjb2RlaXRlbWlkIjoiMSIsInZhbHVlIjoixNAiLCJmdWxsdmFsdWUiOiJbJzEnXSIsImV4cGxhaW4iOiIiLCJsZWFmX29ubHkiOiIwIiwiZGlzcGxheW5hbWUiOiIifSx7ImNvZGVzZXRpZCI6IkFDIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiLT0NCn1qS8/sDgsfAiLCJpdGVtbGVuZ3RoIjoxLCJvbmx5X2ZpZWxkIjoiMCIsImxheWVyIjoiMSIsInZhbHVlIjoiIiwiaXRlbWlkIjoiQTAxODciLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIwIiwiZGlzcGxheW5hbWUiOiIifSx7ImNvZGVzZXRpZCI6IjAiLCJpdGVtdHlwZSI6IkEiLCJpdGVtZGVzYyI6ItakvP66xcLrIiwiaXRlbWxlbmd0aCI6MTgsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIwIiwidmFsdWUiOiIxMTAyMjM3OTA4MTM2OTciLCJpdGVtaWQiOiJBMDE3NyIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiY29kZXNldGlkIjoiMCIsIml0ZW10eXBlIjoiRCIsIml0ZW1kZXNjIjois/bJ+sjVxtoiLCJpdGVtbGVuZ3RoIjoxMCwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJmb3JtYXQiOiJ5eXl5LU1NLWRkIiwiaXRlbWlkIjoiQTAxMTEiLCJkZWNpbWFsIjowLCJtdXN0IjoiMSIsInZhbHVlIjoiMTk3OS0wOC0xMyIsImV4cGxhaW4iOiIiLCJsZWFmX29ubHkiOiIwIiwiZGlzcGxheW5hbWUiOiIifSx7ImNvZGVzZXRpZCI6IkFFIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiLD8dflIiwiaXRlbWxlbmd0aCI6Miwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjEiLCJ2YWx1ZSI6IiIsIml0ZW1pZCI6IkEwMTIxIiwiZXhwbGFpbiI6IiIsImRlY2ltYWwiOjAsImxlYWZfb25seSI6IjAiLCJtdXN0IjoiMSIsImRpc3BsYXluYW1lIjoiIn0seyJjb2Rlc2V0aWQiOiJBNCIsIml0ZW10eXBlIjoiQSIsIml0ZW1kZXNjIjoivK654SIsIml0ZW1sZW5ndGgiOjQsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIyIiwidmFsdWUiOiIiLCJpdGVtaWQiOiJBMDFCUCIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIxIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IryuueEifSx7ImNvZGVzZXRpZCI6IkFUIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiLV/tbOw+bDsiIsIml0ZW1sZW5ndGgiOjIsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIxIiwidmFsdWUiOiIiLCJpdGVtaWQiOiJDMDEwRSIsImV4cGxhaW4iOiJcclxuIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiIifSx7ImNvZGVzZXRpZCI6IkJHIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiK76dL217S/9iIsIml0ZW1sZW5ndGgiOjEsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIxIiwidmFsdWUiOiIiLCJpdGVtaWQiOiJBMDEyNyIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiY29kZXNldGlkIjoiTU4iLCJpdGVtdHlwZSI6IkEiLCJpdGVtZGVzYyI6ItGnwPoiLCJpdGVtbGVuZ3RoIjoxLCJvbmx5X2ZpZWxkIjoiMCIsImxheWVyIjoiMSIsInZhbHVlIjoiIiwiaXRlbWlkIjoiQTAxQkgiLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiLRp8D6In0seyJjb2Rlc2V0aWQiOiJNTyIsIml0ZW10eXBlIjoiQSIsIml0ZW1kZXNjIjoi0afOuyIsIml0ZW1sZW5ndGgiOjEsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIxIiwidmFsdWUiOiIiLCJpdGVtaWQiOiJBMDFCSSIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6ItGnzrsifSx7ImNvZGVzZXRpZCI6IjAiLCJpdGVtdHlwZSI6IkEiLCJpdGVtZGVzYyI6ItLGtq+157uwIiwiaXRlbWxlbmd0aCI6NTAsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIwIiwidmFsdWUiOiIiLCJpdGVtaWQiOiJBMDE0OCIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiY29kZXNldGlkIjoiMCIsIml0ZW10eXBlIjoiQSIsIml0ZW1kZXNjIjoiwarPtbXY1rciLCJpdGVtbGVuZ3RoIjo1MCwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJ2YWx1ZSI6IiIsIml0ZW1pZCI6IkEwMTE5IiwiZXhwbGFpbiI6IiIsImRlY2ltYWwiOjAsImxlYWZfb25seSI6IjAiLCJtdXN0IjoiMSIsImRpc3BsYXluYW1lIjoiIn0seyJjb2Rlc2V0aWQiOiIwIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiK159fT08rP5CIsIml0ZW1sZW5ndGgiOjQwLCJvbmx5X2ZpZWxkIjoiMCIsImxheWVyIjoiMCIsInZhbHVlIjoiMTM2MzE2M0BxcS5jb20iLCJpdGVtaWQiOiJBMDE0NiIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiY29kZXNldGlkIjoiMCIsIml0ZW10eXBlIjoiQSIsIml0ZW1kZXNjIjoivMjN+bKhyrciLCJpdGVtbGVuZ3RoIjoyMDAsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIwIiwidmFsdWUiOiIiLCJpdGVtaWQiOiJBMDFCSyIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IrzIzfmyocq3In0seyJjb2Rlc2V0aWQiOiIwIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiK1tbC4y/nU2rXYIiwiaXRlbWxlbmd0aCI6MTAwLCJvbmx5X2ZpZWxkIjoiMCIsImxheWVyIjoiMCIsInZhbHVlIjoiIiwiaXRlbWlkIjoiQTAxQkwiLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiK1tbC4y/nU2rXYIn0seyJjb2Rlc2V0aWQiOiIwIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiLP1rTTysLXqNK1u/LR0L6/t73P8iIsIml0ZW1sZW5ndGgiOjEwMCwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJ2YWx1ZSI6IiIsIml0ZW1pZCI6IkEwMUNTIiwiZXhwbGFpbiI6IiIsImRlY2ltYWwiOjAsImxlYWZfb25seSI6IjAiLCJtdXN0IjoiMSIsImRpc3BsYXluYW1lIjoiz9a008rC16jStbvy0dC+v7e9z/IifSx7ImNvZGVzZXRpZCI6IjAiLCJpdGVtdHlwZSI6IkEiLCJpdGVtZGVzYyI6ItXQxrjQxc+iwLTUtCIsIml0ZW1sZW5ndGgiOjEwMCwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJ2YWx1ZSI6IiIsIml0ZW1pZCI6IkEwMUNZIiwiZXhwbGFpbiI6IiIsImRlY2ltYWwiOjAsImxlYWZfb25seSI6IjAiLCJtdXN0IjoiMCIsImRpc3BsYXluYW1lIjoiIn0seyJjb2Rlc2V0aWQiOiIwIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiLTotPvy67GvSIsIml0ZW1sZW5ndGgiOjUwLCJvbmx5X2ZpZWxkIjoiMCIsImxheWVyIjoiMCIsInZhbHVlIjoiIiwiaXRlbWlkIjoiQTAxREEiLCJleHBsYWluIjoiwP3I56O6Q0VUNqOvNDgwIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiLTotPvy67GvSJ9LHsiY29kZXNldGlkIjoiMCIsIml0ZW10eXBlIjoiQSIsIml0ZW1kZXNjIjoi1rCzxiIsIml0ZW1sZW5ndGgiOjEwMCwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJ2YWx1ZSI6IiIsIml0ZW1pZCI6IkEwMUREIiwiZXhwbGFpbiI6IiIsImRlY2ltYWwiOjAsImxlYWZfb25seSI6IjAiLCJtdXN0IjoiMSIsImRpc3BsYXluYW1lIjoi1rCzxiJ9LHsiY29kZXNldGlkIjoiMCIsIml0ZW10eXBlIjoiQSIsIml0ZW1kZXNjIjoisc/StdS60KMiLCJpdGVtbGVuZ3RoIjoxMDAsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIwIiwidmFsdWUiOiIiLCJpdGVtaWQiOiJBMDFERSIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IrHP0rXUutCjIn0seyJjb2Rlc2V0aWQiOiIwIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiLL+dGn16jStSIsIml0ZW1sZW5ndGgiOjEwMCwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJ2YWx1ZSI6IiIsIml0ZW1pZCI6IkEwMURGIiwiZXhwbGFpbiI6IiIsImRlY2ltYWwiOjAsImxlYWZfb25seSI6IjAiLCJtdXN0IjoiMSIsImRpc3BsYXluYW1lIjoiy/nRp9eo0rUifSx7ImNvZGVzZXRpZCI6IjAiLCJpdGVtdHlwZSI6IkEiLCJpdGVtZGVzYyI6IrHP0rXKsbzkIiwiaXRlbWxlbmd0aCI6MTAwLCJvbmx5X2ZpZWxkIjoiMCIsImxheWVyIjoiMCIsInZhbHVlIjoiIiwiaXRlbWlkIjoiQTAxREciLCJleHBsYWluIjoiwP3I56O6MjAyMcTqNtTCIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbQ0KMjAwMA0KZSI6IrHP0rXKsbzkIn0seyJjb2Rlc2V0aWQiOiJOUSIsIml0ZW10eXBlIjoiQSIsIml0ZW1kZXNjIjoixeDR+Le9yr0iLCJpdGVtbGVuZ3RoIjoxLCJvbmx5X2ZpZWxkIjoiMCIsImxheWVyIjoiMSIsInZhbHVlIjoiIiwiaXRlbWlkIjoiQTAxREgiLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiLF4NH4t73KvSJ9LHsiZmlsZV9saXN0IjpudWxsfV1dfSwiQUJLIjp7InJlY29yZCI6Im5vIiwiZGF0YWxpc3QiOltbeyJjb2Rlc2V0aWQiOiIwIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiKxz9K10afQoyIsIml0ZW1sZW5ndGgiOjEwMCwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJpdGVtaWQiOiJBQktBQSIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiY29kZXNldGlkIjoiMCIsIml0ZW10eXBlIjoiRCIsIml0ZW1kZXNjIjoiuN/W0MbwyrzKsbzkIiwiaXRlbWxlbmd0aCI6MTAsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIwIiwiZm9ybWF0IjoieXl5eS1NTS1kZCIsIml0ZW1pZCI6IkFCS0FCIiwiZXhwbGFpbiI6IiIsImRlY2ltYWwiOjAsImxlYWZfb25seSI6IjAiLCJtdXN0IjoiMCIsImRpc3BsYXluYW1lIjoiIn0seyJjb2Rlc2V0aWQiOiIwIiwiaXRlbXR5cGUiOiJEIiwiaXRlbWRlc2MiOiK439bQveHK+MqxvOQiLCJpdGVtbGVuZ3RoIjoxMCwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJmb3JtYXQiOiJ5eXl5LU1NLWRkIiwiaXRlbWlkIjoiQUJLQUMiLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIwIiwiZGlzcGxheW5hbWUiOiIifSx7ImZpbGVfbGlzdCI6bnVsbH1dXX0sIkFBTCI6eyJyZWNvcmQiOiJubyIsImRhdGFsaXN0IjpbW3siY29kZXNldGlkIjoiMCIsIml0ZW10eXBlIjoiQSIsIml0ZW1kZXNjIjoisc/StdGn0KO78rWlzrsiLCJpdGVtbGVuZ3RoIjoxMDAsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIwIiwiaXRlbWlkIjoiQUFMQUEiLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiIifSx7ImNvZGVzZXRpZCI6IjAiLCJpdGVtdHlwZSI6IkQiLCJpdGVtZGVzYyI6IrG+v8bG8Mq8yrG85CIsIml0ZW1sZW5ndGgiOjEwLCJvbmx5X2ZpZWxkIjoiMCIsImxheWVyIjoiMCIsImZvcm1hdCI6Inl5eXktTU0tZGQiLCJpdGVtaWQiOiJBQUxBQiIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiY29kZXNldGlkIjoiMCIsIml0ZW10eXBlIjoiRCIsIml0ZW1kZXNjIjoisb6/xr3hyvjKsbzkIiwiaXRlbWxlbmd0aCI6MTAsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIwIiwiZm9ybWF0IjoieXl5eS1NTS1kZCIsIml0ZW1pZCI6IkFBTEFDIiwiZXhwbGFpbiI6IiIsImRlY2ltYWwiOjAsImxlYWZfb25seSI6IjAiLCJtdXN0IjoiMSIsImRpc3BsYXluYW1lIjoiIn0seyJjb2Rlc2V0aWQiOiJNUiIsIml0ZW10eXBlIjoiQSIsIml0ZW1kZXNjIjoiyty9zNP9wODQzSIsIml0ZW1sZW5ndGgiOjEsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIxIiwiaXRlbWlkIjoiQUFMQUQiLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiIifSx7ImNvZGVzZXRpZCI6Ik1TIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiLRp7/GIiwiaXRlbWxlbmd0aCI6MSwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjEiLCJpdGVtaWQiOiJBQUxBRSIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiY29kZXNldGlkIjoiMCIsIml0ZW10eXBlIjoiQSIsIml0ZW1kZXNjIjoi16jStcP7s8YiLCJpdGVtbGVuZ3RoIjoxMDAsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIwIiwiaXRlbWlkIjoiQUFMQUYiLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiIifSx7ImNvZGVzZXRpZCI6IjAiLCJpdGVtdHlwZSI6Ik4iLCJpdGVtZGVzYyI6IrG+v8bRp9bGIiwiaXRlbWxlbmd0aCI6MSwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJpdGVtaWQiOiJBQUxBRyIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjoxLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiZmlsZV9saXN0IjpudWxsfV1dfSwiQUFOIjp7InJlY29yZCI6Im5vIiwiZGF0YWxpc3QiOltbeyJjb2Rlc2V0aWQiOiIwIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiKyqcq/sc/StdGn0KO78rWlzrsiLCJpdGVtbGVuZ3RoIjoxMDAsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIwIiwiaXRlbWlkIjoiQUFOQUEiLCJleHBsYWluIjoiyOfDu9PQo6zM7tC0zt4iLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiY29kZXNldGlkIjoiMCIsIml0ZW10eXBlIjoiRCIsIml0ZW1kZXNjIjoisqnKv8bwyrzKsbzkIiwiaXRlbWxlbmd0aCI6MTAsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIwIiwiZm9ybWF0IjoieXl5eS1NTS1kZCIsIml0ZW1pZCI6IkFBTkFCIiwiZXhwbGFpbiI6IiIsImRlY2ltYWwiOjAsImxlYWZfb25seSI6IjAiLCJtdXN0IjoiMCIsImRpc3BsYXluYW1lIjoiIn0seyJjb2Rlc2V0aWQiOiIwIiwiaXRlbXR5cGUiOiJEIiwiaXRlbWRlc2MiOiKyqcq/veHK+MqxvOQiLCJpdGVtbGVuZ3RoIjoxMCwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJmb3JtYXQiOiJ5eXl5LU1NLWRkIiwiaXRlbWlkIjoiQUFOQUMiLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIwIiwiZGlzcGxheW5hbWUiOiIifSx7ImNvZGVzZXRpZCI6Ik1UIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiKyqcq/yty9zNP9wODQzSIsIml0ZW1sZW5ndGgiOjEsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIxIiwiaXRlbWlkIjoiQUFOQUQiLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIwIiwiZGlzcGxheW5hbWUiOiIifSx7ImNvZGVzZXRpZCI6Ik1TIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiKyqcq/0ae/xiIsIml0ZW1sZW5ndGgiOjEsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIxIiwiaXRlbWlkIjoiQUFOQUUiLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIwIiwiZGlzcGxheW5hbWUiOiIifSx7ImNvZGVzZXRpZCI6IjAiLCJpdGVtdHlwZSI6IkEiLCJpdGVtZGVzYyI6IrKpyr+1vMqmIiwiaXRlbWxlbmd0aCI6NTAsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIwIiwiaXRlbWlkIjoiQUFOQUgiLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIwIiwiZGlzcGxheW5hbWUiOiIifSx7ImNvZGVzZXRpZCI6IjAiLCJpdGVtdHlwZSI6IkEiLCJpdGVtZGVzYyI6IrKpyr/XqNK1w/uzxiIsIml0ZW1sZW5ndGgiOjEwMCwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJpdGVtaWQiOiJBQU5BRiIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjAiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiY29kZXNldGlkIjoiMCIsIml0ZW10eXBlIjoiTiIsIml0ZW1kZXNjIjoisqnKv9Gn1sYiLCJpdGVtbGVuZ3RoIjoxLCJvbmx5X2ZpZWxkIjoiMCIsImxheWVyIjoiMCIsIml0ZW1pZCI6IkFBTkFHIiwiZXhwbGFpbiI6IiIsImRlY2ltYWwiOjEsImxlYWZfb25seSI6IjAiLCJtdXN0IjoiMCIsImRpc3BsYXluYW1lIjoiIn0seyJmaWxlX2xpc3QiOm51bGx9XV19LCJBQlAiOnsicmVjb3JkIjoibm8iLCJkYXRhbGlzdCI6W1t7ImNvZGVzZXRpZCI6IjAiLCJpdGVtdHlwZSI6Ik0iLCJpdGVtZGVzYyI6ItfKuPHWpMrpIiwiaXRlbWxlbmd0aCI6MTAsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIwIiwiaXRlbWlkIjoiQUJQQUEiLCJleHBsYWluIjoiIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIwIiwiZGlzcGxheW5hbWUiOiIifSx7ImZpbGVfbGlzdCI6bnVsbH1dXX0sIkFCTyI6eyJyZWNvcmQiOiJubyIsImRhdGFsaXN0IjpbW3siY29kZXNldGlkIjoiMCIsIml0ZW10eXBlIjoiTSIsIml0ZW1kZXNjIjoixuTL+8u1w/ciLCJpdGVtbGVuZ3RoIjoxMCwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJpdGVtaWQiOiJBQk9BQSIsImV4cGxhaW4iOiLI9LGow/ux7cv5wdDP7sS/srvE3Le007O1xKOs06bGuNXf0OvU2rTL16LD96GjIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiLG5Mv7y7XD9yJ9LHsiZmlsZV9saXN0IjpudWxsfV1dfSwiQUFLIjp7InJlY29yZCI6Im5vIiwiZGF0YWxpc3QiOltbeyJjb2Rlc2V0aWQiOiJNUSIsIml0ZW10eXBlIjoiQSIsIml0ZW1kZXNjIjoivMbL47v61qTK6bXIvLYiLCJpdGVtbGVuZ3RoIjoxLCJvbmx5X2ZpZWxkIjoiMCIsImxheWVyIjoiMSIsIml0ZW1pZCI6IkFBS0FBIiwiZXhwbGFpbiI6IiIsImRlY2ltYWwiOjAsImxlYWZfb25seSI6IjAiLCJtdXN0IjoiMCIsImRpc3BsYXluYW1lIjoiIn0seyJjb2Rlc2V0aWQiOiIwIiwiaXRlbXR5cGUiOiJBIiwiaXRlbWRlc2MiOiK8xsvju/rWpMrpt9bK/SIsIml0ZW1sZW5ndGgiOjEwMCwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJpdGVtaWQiOiJBQUtBQiIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjAiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiZmlsZV9saXN0IjpudWxsfV1dfSwiQUJOIjp7InJlY29yZCI6Im5vIiwiZGF0YWxpc3QiOltbeyJjb2Rlc2V0aWQiOiIwIiwiaXRlbXR5cGUiOiJNIiwiaXRlbWRlc2MiOiLW99Kq0rW8qLPJufsiLCJpdGVtbGVuZ3RoIjoxMCwib25seV9maWVsZCI6IjAiLCJsYXllciI6IjAiLCJpdGVtaWQiOiJBQk5BQSIsImV4cGxhaW4iOiIiLCJkZWNpbWFsIjowLCJsZWFmX29ubHkiOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IiJ9LHsiZmlsZV9saXN0IjpudWxsfV1dfSwiQUJNIjp7InJlY29yZCI6Im5vIiwiZGF0YWxpc3QiOltbeyJjb2Rlc2V0aWQiOiIwIiwiaXRlbXR5cGUiOiJNIiwiaXRlbWRlc2MiOiKxvsjLvLDF5MW80+vO0tCjvczWsLmkyP20+sfXyvS52M+1IiwiaXRlbWxlbmd0aCI6MTAsIm9ubHlfZmllbGQiOiIwIiwibGF5ZXIiOiIwIiwiaXRlbWlkIjoiQUJNQUciLCJleHBsYWluIjoix9fK9NDVw/uhornYz7Whormk1/eyv8PFvLDIztawo7vI58O709DH68zu0LTO3qGjIiwiZGVjaW1hbCI6MCwibGVhZl9vbmx5IjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiIifSx7ImZpbGVfbGlzdCI6bnVsbH1dXX19LCJhdHRhY2giOiIxIiwiYXR0YWNoQ29kZVNldCI6W3siaGFzRmlsZSI6dHJ1ZSwiaXRlbURlc2MiOiLTpsa4ssTBzyIsIm5vdE51bGwiOiIxIiwiaXRlbUlkIjoiMDEifV0sInN1YkZpbGVNYXhTaXplIjoiNTI0Mjg4MC4wIiwiZmllbGRfc2V0X2xpc3QiOlt7ImZpZWxkc2V0ZGVzYyI6Irv5sb7Qxc+iIiwiZmllbGRzZXRpZCI6IkEwMSIsImRlbGV0ZVJlY29yZCI6IiIsImV4cGxhaW4iOiIiLCJmaWxlX2ZsYWciOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6Irv5sb7Qxc+iIn0seyJmaWVsZHNldGRlc2MiOiK439bQ0afPsL6twPoiLCJmaWVsZHNldGlkIjoiQUJLIiwiZGVsZXRlUmVjb3JkIjoiIiwiZXhwbGFpbiI6IiIsImZpbGVfZmxhZyI6IjAiLCJtdXN0IjoiMSIsImRpc3BsYXluYW1lIjoiuN/W0NGnz7C+rcD6In0seyJmaWVsZHNldGRlc2MiOiKxvr/G0afPsL6twPqjqNXQxrijqSIsImZpZWxkc2V0aWQiOiJBQUwiLCJkZWxldGVSZWNvcmQiOiIiLCJleHBsYWluIjoiIiwiZmlsZV9mbGFnIjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiKxvr/G0afPsL6twPoifSx7ImZpZWxkc2V0ZGVzYyI6Isu2yr/Rp8+wvq3A+qOo1dDGuKOpIiwiZmllbGRzZXRpZCI6IkFBTSIsImRlbGV0ZVJlY29yZCI6IiIsImV4cGxhaW4iOiIiLCJmaWxlX2ZsYWciOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6Isu2yr/Rp8+wvq3A+iJ9LHsiZmllbGRzZXRkZXNjIjoisqnKv9Gnz7C+rcD6o6jV0Ma4o6kiLCJmaWVsZHNldGlkIjoiQUFOIiwiZGVsZXRlUmVjb3JkIjoiIiwiZXhwbGFpbiI6IiIsImZpbGVfZmxhZyI6IjAiLCJtdXN0IjoiMSIsImRpc3BsYXluYW1lIjoisqnKv9Gnz7C+rcD6In0seyJmaWVsZHNldGRlc2MiOiK5pNf3vPLA+iIsImZpZWxkc2V0aWQiOiJBMTkiLCJkZWxldGVSZWNvcmQiOiIiLCJleHBsYWluIjoiIiwiZmlsZV9mbGFnIjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiK5pNf3vq3A+iJ9LHsiZmllbGRzZXRkZXNjIjoivNLNpbPJ1LHQxc+iIiwiZmllbGRzZXRpZCI6IkE3OSIsImRlbGV0ZVJlY29yZCI6IiIsImV4cGxhaW4iOiIiLCJmaWxlX2ZsYWciOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IrzSzaXH6b/2In0seyJmaWVsZHNldGRlc2MiOiKxvsjLvLCwrsjL0+vO0tCjvczWsLmkyP20+sfXyvS52M+1IiwiZmllbGRzZXRpZCI6IkFCTSIsImRlbGV0ZVJlY29yZCI6IiIsImV4cGxhaW4iOiIiLCJmaWxlX2ZsYWciOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6IrG+yMu8sMXkxbzT687S0KO9zNawuaTI/bT6x9fK9LnYz7UifSx7ImZpZWxkc2V0ZGVzYyI6IrzGy+O7+sTcwaajqNXQxrijqSIsImZpZWxkc2V0aWQiOiJBQUsiLCJkZWxldGVSZWNvcmQiOiIiLCJleHBsYWluIjoiIiwiZmlsZV9mbGFnIjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiK8xsvju/rE3MGmIn0seyJmaWVsZHNldGRlc2MiOiLXytXf1qTK6SIsImZpZWxkc2V0aWQiOiJBQlAiLCJkZWxldGVSZWNvcmQiOiIiLCJleHBsYWluIjoiIiwiZmlsZV9mbGFnIjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiLXyrjx1qTK6SJ9LHsiZmllbGRzZXRkZXNjIjoiu/G9sbPJufsiLCJmaWVsZHNldGlkIjoiQTQ5IiwiZGVsZXRlUmVjb3JkIjoiIiwiZXhwbGFpbiI6IiIsImZpbGVfZmxhZyI6IjAiLCJtdXN0IjoiMSIsImRpc3BsYXluYW1lIjoivbGzzcfpv/YifSx7ImZpZWxkc2V0ZGVzYyI6ItGnyfq5pNf3vq3A+qOo1dDGuKOpIiwiZmllbGRzZXRpZCI6IkFCUSIsImRlbGV0ZVJlY29yZCI6IiIsImV4cGxhaW4iOiIiLCJmaWxlX2ZsYWciOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6ItGnyfq5pNf3vq3A+iJ9LHsiZmllbGRzZXRkZXNjIjoi1vfSqtK1vKizybn7IiwiZmllbGRzZXRpZCI6IkFCTiIsImRlbGV0ZVJlY29yZCI6IiIsImV4cGxhaW4iOiIiLCJmaWxlX2ZsYWciOiIwIiwibXVzdCI6IjEiLCJkaXNwbGF5bmFtZSI6Itb30qrStbyos8m5+yJ9LHsiZmllbGRzZXRkZXNjIjoi06bGuLavu/qjqNXQxrijqSIsImZpZWxkc2V0aWQiOiJBQVAiLCJkZWxldGVSZWNvcmQiOiIiLCJleHBsYWluIjoiIiwiZmlsZV9mbGFnIjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiLTpsa4tq+7+iJ9LHsiZmllbGRzZXRkZXNjIjoisbjXoiIsImZpZWxkc2V0aWQiOiJBQk8iLCJkZWxldGVSZWNvcmQiOiIiLCJleHBsYWluIjoiIiwiZmlsZV9mbGFnIjoiMCIsIm11c3QiOiIxIiwiZGlzcGxheW5hbWUiOiLG5Mv7y7XD9yJ9XSwidXBsb2FkRmlsZUxpc3QiOlt7ImVuY3J5cHRfZmlsZV9uYW1lIjoiSEFVNDdiUXVQQUFUVFAySEpGUEFBVFRQWlpvZ2JQNUNSTnJZd1BBQVRUUDNISkRQQUFUVFBQQUFUVFAzSEpEUEFBVFRQIiwiZmlsZV9pZCI6IjYxS0d6SlF2S2JnUEFBVFRQM0hKRFBBQVRUUCIsImZpbGVOYW1lIjoi06bGuLLEwc8ucG5nIiwicGF0aCI6InNKWWhmVjZ4bWtLQ0tMaEpLMllQQUFUVFAySEpGUEFBVFRQMHhyUEVpM3VtRTJVUjhhU2Y4OElqNmVoR3ZieEpmRVVkR3prS2d5RkhqZ2szUEFBVFRQMkhKQlBBQVRUUFdCTGZ5MndlU0Y2azFwbVB3ZjhWRTZQQUFUVFAySEpGUEFBVFRQQTdCNGJkRUhxbGpjVTB2eVVCZG12SG9wZEhMdGdQQUFUVFAzSEpEUEFBVFRQUEFBVFRQM0hKRFBBQVRUUCIsImZpbGVfbmFtZSI6ItOmxriyxMHPLnBuZyIsImZpbGVfdHlwZSI6InBuZyJ9XSwiZW1haWxfaXRlbSI6ImEwMTQNCjdiDQo2IiwicGhvbmVfaXRlbSI6ImEwMTQ4In0sInNlc3Npb25ITSI6e30sImFwcGx5Q29kZSI6IjAyIiwidHlwZSI6InNlYXJjaCIsImZ1bmN0aW9uSWQiOiJaUDEwMDAwMDAwMDQiLCJjYW5kaWRhdGVfc3RhdHVzIjoiIn0NCjANCg0K`)
	resp, body, err := FixHTTPResponse(raw)
	if err != nil {
		panic(err)
	}
	if !strings.Contains(string(body), "操作执行成功") {
		panic("Chinese failed!")
	}
	if !strings.Contains(string(resp), "charset=utf-8") {
		panic("Encoding Failed")
	}
}

func TestFixRequestingDoubleCRLF(t *testing.T) {
	req := FixHTTPRequestOut([]byte(`POST /abc HTTP/1.1` + "\r\r\nHost: www.baidu.com\r\r\r\n\r\n"))
	println(string(req))
}
